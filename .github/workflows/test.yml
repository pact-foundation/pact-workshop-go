name: Pact-Workshop(GoLang)

on:
    push:
        branches:
            - step9
    pull_request:
        branches:
            - step9

jobs:
    build:
        runs-on: ubuntu-latest
        defaults:
            run:
              shell: bash
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4
            - name: Set up Go
              uses: actions/setup-go@v3
              with:
                    go-version: 1.21
            - name: install
              run: make install
            - name: install_pact_cli
              run: make install_pact_cli
            - name: consumer unit tests
              run: make unit
            - name: consumer pact tests
              run: make consumer
            - name: provider pact tests
              run: make provider || true
